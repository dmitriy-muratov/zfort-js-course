(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var playerTmpl=require("./templates/player"),defineUI=require("./ui_dom"),audioPlayer={_element:null,_isPlaying:!1,_currentTrack:0,_defineUI:defineUI,_renderPlaylist:function(){this._display.playlist.innerHTML=this._userData.playlist.map(function(e){return'<li class="item">'+e.title+"</li>"}).join("")},init:function(e,t){this._userData={},this._userData.playlist=t,this._handlePlaybackChange=this._handlePlaybackChange.bind(this),this._handleTimeChange=this._handleTimeChange.bind(this),this._handleNext=this._handleNext.bind(this),this._handlePrev=this._handlePrev.bind(this),this._element=e,this._element.style.display="none";var i=this._buildUI(),n=this._element.parentNode;n.insertBefore(i,this._element),this._defineUI(n.querySelector(".player")),this._renderPlaylist(),this._setupEventListeners(),this._setTrack(0)},_setTrack:function(e){this._currentTrack=e,this._element.src=this._userData.playlist[e].url,this._setTime(0)},_play:function(){this._element.play()},_pause:function(){this._element.pause()},_buildUI:function(){var e=document.createElement("div");return e.innerHTML=playerTmpl,e},_setupEventListeners:function(){this._element.addEventListener("timeupdate",this._handleTimeChange,!1),this._controls.playback.addEventListener("click",this._handlePlaybackChange,!1),this._controls.next.addEventListener("click",this._handleNext,!1),this._controls.prev.addEventListener("click",this._handlePrev,!1)},_handlePlaybackChange:function(){this._isPlaying?(this._isPlaying=!1,this._controls.playback.textContent="PLAY",this._pause()):(this._isPlaying=!0,this._controls.playback.textContent="PAUSE",this._play())},_handleTimeChange:function(){var e=Math.floor(this._element.currentTime);this._setTime(e)},_setTime:function(e){var t=Math.floor(e/60),i=e%60;t=t<10?"0"+t:t,i=i<10?"0"+i:i,this._display.time.textContent=t+":"+i},_handleNext:function(){this._setTrack(this._currentTrack+1),this._play()},_handlePrev:function(){this._setTrack(this._currentTrack-1),this._play()}};window.audioPlayer=audioPlayer;
},{"./templates/player":2,"./ui_dom":3}],2:[function(require,module,exports){
var playerTmpl='<span class="player"><div><span class="time">00:00</span><button class="btn play">PLAY</button><button class="btn next">NEXT</button><button class="btn prev">PREV</button></div><div class="playlist"><ul class="list"></ul></div></span>';module.exports=playerTmpl;

},{}],3:[function(require,module,exports){
function defineUI(e){this._controls={playback:e.querySelector(".play"),next:e.querySelector(".next"),prev:e.querySelector(".prev")},this._display={time:e.querySelector(".time"),playlist:e.querySelector(".playlist .list")}}module.exports=defineUI;
},{}]},{},[1]);
